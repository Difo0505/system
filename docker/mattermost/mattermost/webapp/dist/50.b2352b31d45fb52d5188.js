webpackJsonp([50],{1376:function(e,a,t){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var l=t(51),s=r(l),o=t(32),i=r(o),d=t(33),n=r(d),u=t(50),m=r(u),c=t(49),f=r(c),p=t(1785),h=r(p),w=t(28),E=function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a}(w),v=t(114),g=t(151),_=r(g),b=t(14),M=r(b),P=t(197),y=function(a){function t(e){(0,i.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.submit=a.submit.bind(a),a.preSubmit=a.preSubmit.bind(a),a.state={passwordError:"",confirmError:"",ldapPasswordError:"",serverError:""},a}return(0,f.default)(t,a),(0,n.default)(t,[{key:"preSubmit",value:function(e){var a=this;e.preventDefault();var t={passwordError:"",confirmError:"",ldapPasswordError:"",serverError:""},r=this.refs.ldappassword.value;if(!r)return t.ldapPasswordError=E.localizeMessage("claim.ldap_to_email.ldapPasswordError","Please enter your AD/LDAP password."),void this.setState(t);var l=this.refs.password.value;if(!l)return t.passwordError=E.localizeMessage("claim.ldap_to_email.pwdError","Please enter your password."),void this.setState(t);var s=E.isValidPassword(l);if(""!==s)return void this.setState({passwordError:s});var o=this.refs.passwordconfirm.value;if(!o||l!==o)return t.confirmError=E.localizeMessage("claim.ldap_to_email.pwdNotMatch","Passwords do not match."),void this.setState(t);t.password=l,t.ldapPassword=r,this.setState(t),(0,v.checkMfa)(this.props.email,function(e){e?a.setState({showMfa:!0}):a.submit(a.props.email,l,"",r)},function(e){a.setState({error:e.message})})}},{key:"submit",value:function(e,a,t,r){var l=this;(0,v.switchFromLdapToEmail)(this.props.email,a,t,r||this.state.ldapPassword,null,function(e){return l.setState({serverError:e.message,showMfa:!1})})}},{key:"render",value:function(){var a=null,t="form-group";this.state.serverError&&(a=M.default.createElement("div",{className:"form-group has-error"},M.default.createElement("label",{className:"control-label"},this.state.serverError)),t+=" has-error");var r=null,l="form-group";this.state.passwordError&&(r=M.default.createElement("div",{className:"form-group has-error"},M.default.createElement("label",{className:"control-label"},this.state.passwordError)),l+=" has-error");var s=null,o="form-group";this.state.ldapPasswordError&&(s=M.default.createElement("div",{className:"form-group has-error"},M.default.createElement("label",{className:"control-label"},this.state.ldapPasswordError)),o+=" has-error");var i=null,d="form-group";this.state.confirmError&&(i=M.default.createElement("div",{className:"form-group has-error"},M.default.createElement("label",{className:"control-label"},this.state.confirmError)),d+=" has-error");var n=void 0;n=e.window.mm_config.LdapPasswordFieldName?e.window.mm_config.LdapPasswordFieldName:E.localizeMessage("claim.ldap_to_email.ldapPwd","AD/LDAP Password");var u=void 0;return u=this.state.showMfa?M.default.createElement(h.default,{loginId:this.props.email,password:this.state.password,submit:this.submit}):M.default.createElement("form",{onSubmit:this.preSubmit,className:t},M.default.createElement("p",null,M.default.createElement(P.FormattedMessage,{id:"claim.ldap_to_email.ssoType",defaultMessage:"Upon claiming your account, you will only be able to login with your email and password"})),M.default.createElement("p",null,M.default.createElement(P.FormattedMessage,{id:"claim.ldap_to_email.email",defaultMessage:"You will use the email {email} to login",values:{email:this.props.email}})),M.default.createElement("p",null,M.default.createElement(P.FormattedMessage,{id:"claim.ldap_to_email.enterLdapPwd",defaultMessage:"Enter your {ldapPassword} for your {site} email account",values:{ldapPassword:n,site:e.window.mm_config.SiteName}})),M.default.createElement("div",{className:o},M.default.createElement("input",{type:"password",className:"form-control",name:"ldapPassword",ref:"ldappassword",placeholder:n,spellCheck:"false"})),s,M.default.createElement("p",null,M.default.createElement(P.FormattedMessage,{id:"claim.ldap_to_email.enterPwd",defaultMessage:"Enter a new password for your email account"})),M.default.createElement("div",{className:l},M.default.createElement("input",{type:"password",className:"form-control",name:"password",ref:"password",placeholder:E.localizeMessage("claim.ldap_to_email.pwd","Password"),spellCheck:"false"})),r,M.default.createElement("div",{className:d},M.default.createElement("input",{type:"password",className:"form-control",name:"passwordconfirm",ref:"passwordconfirm",placeholder:E.localizeMessage("claim.ldap_to_email.confirm","Confirm Password"),spellCheck:"false"})),i,M.default.createElement("button",{type:"submit",className:"btn btn-primary"},M.default.createElement(P.FormattedMessage,{id:"claim.ldap_to_email.switchTo",defaultMessage:"Switch account to email/password"})),a),M.default.createElement("div",null,M.default.createElement("h3",null,M.default.createElement(P.FormattedMessage,{id:"claim.ldap_to_email.title",defaultMessage:"Switch AD/LDAP Account to Email/Password"})),u)}}]),t}(M.default.Component);a.default=y,y.defaultProps={},y.propTypes={email:_.default.string}}).call(a,t(16))},1785:function(e,a,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(a,"__esModule",{value:!0});var l=t(51),s=r(l),o=t(32),i=r(o),d=t(33),n=r(d),u=t(50),m=r(u),c=t(49),f=r(c),p=t(28),h=function(e){if(e&&e.__esModule)return e;var a={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t]);return a.default=e,a}(p),w=t(197),E=t(151),v=r(E),g=t(14),_=r(g),b=function(e){function a(e){(0,i.default)(this,a);var t=(0,m.default)(this,(a.__proto__||(0,s.default)(a)).call(this,e));return t.handleSubmit=t.handleSubmit.bind(t),t.state={serverError:""},t}return(0,f.default)(a,e),(0,n.default)(a,[{key:"handleSubmit",value:function(e){e.preventDefault();var a={},t=this.refs.token.value.trim().replace(/\s/g,"");if(!t)return a.serverError=h.localizeMessage("login_mfa.tokenReq","Please enter an MFA token"),void this.setState(a);a.serverError="",this.setState(a),this.props.submit(this.props.loginId,this.props.password,t)}},{key:"render",value:function(){var e=void 0,a="";return this.state.serverError&&(e=_.default.createElement("label",{className:"control-label"},this.state.serverError),a=" has-error"),_.default.createElement("form",{onSubmit:this.handleSubmit},_.default.createElement("div",{className:"signup__email-container"},_.default.createElement("p",null,_.default.createElement(w.FormattedMessage,{id:"login_mfa.enterToken",defaultMessage:"To complete the sign in process, please enter a token from your smartphone's authenticator"})),_.default.createElement("div",{className:"form-group"+a},e),_.default.createElement("div",{className:"form-group"+a},_.default.createElement("input",{type:"text",className:"form-control",name:"token",ref:"token",placeholder:h.localizeMessage("login_mfa.token","MFA Token"),spellCheck:"false",autoComplete:"off",autoFocus:!0})),_.default.createElement("div",{className:"form-group"},_.default.createElement("button",{type:"submit",className:"btn btn-primary"},_.default.createElement(w.FormattedMessage,{id:"login_mfa.submit",defaultMessage:"Submit"})))))}}]),a}(_.default.Component);a.default=b,b.defaultProps={},b.propTypes={loginId:v.default.string.isRequired,password:v.default.string.isRequired,submit:v.default.func.isRequired}}});
//# sourceMappingURL=50.b2352b31d45fb52d5188.js.map