webpackJsonp([45],{1374:function(e,t,a){"use strict";(function(e){function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(51),o=l(r),n=a(32),s=l(n),i=a(33),u=l(i),d=a(50),f=l(d),c=a(49),m=l(c),p=a(1785),h=l(p),v=a(28),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(v),g=a(114),w=a(1644),_=a(151),b=l(_),y=a(14),M=l(y),P=a(197),A=function(t){function a(e){(0,s.default)(this,a);var t=(0,f.default)(this,(a.__proto__||(0,o.default)(a)).call(this,e));return t.submit=t.submit.bind(t),t.preSubmit=t.preSubmit.bind(t),t.state={passwordError:"",ldapError:"",ldapPasswordError:"",serverError:"",showMfa:!1},t}return(0,m.default)(a,t),(0,u.default)(a,[{key:"preSubmit",value:function(e){var t=this;e.preventDefault();var a={passwordError:"",ldapError:"",ldapPasswordError:"",serverError:""},l=this.refs.emailpassword.value;if(!l)return a.passwordError=E.localizeMessage("claim.email_to_ldap.pwdError","Please enter your password."),void this.setState(a);var r=this.refs.ldapid.value.trim();if(!r)return a.ldapError=E.localizeMessage("claim.email_to_ldap.ldapIdError","Please enter your AD/LDAP ID."),void this.setState(a);var o=this.refs.ldappassword.value;if(!o)return a.ldapPasswordError=E.localizeMessage("claim.email_to_ldap.ldapPasswordError","Please enter your AD/LDAP password."),void this.setState(a);a.password=l,a.ldapId=r,a.ldapPassword=o,this.setState(a),(0,g.checkMfa)(this.props.email,function(e){e?t.setState({showMfa:!0}):t.submit(t.props.email,l,"",r,o)},function(e){t.setState({error:e.message})})}},{key:"submit",value:function(e,t,a,l,r){var o=this;(0,w.emailToLdap)(e,t,a,l||this.state.ldapId,r||this.state.ldapPassword,function(e){e.follow_link&&(window.location.href=e.follow_link)},function(e){o.setState({serverError:e.message,showMfa:!1})})}},{key:"render",value:function(){var t=null,a="form-group";this.state.serverError&&(t=M.default.createElement("div",{className:"form-group has-error"},M.default.createElement("label",{className:"control-label"},this.state.serverError)),a+=" has-error");var l=null,r="form-group";this.state.passwordError&&(l=M.default.createElement("div",{className:"form-group has-error"},M.default.createElement("label",{className:"control-label"},this.state.passwordError)),r+=" has-error");var o=null,n="form-group";this.state.ldapError&&(o=M.default.createElement("div",{className:"form-group has-error"},M.default.createElement("label",{className:"control-label"},this.state.ldapError)),n+=" has-error");var s=null,i="form-group";this.state.ldapPasswordError&&(s=M.default.createElement("div",{className:"form-group has-error"},M.default.createElement("label",{className:"control-label"},this.state.ldapPasswordError)),i+=" has-error");var u=void 0;u=e.window.mm_config.LdapLoginFieldName?e.window.mm_config.LdapLoginFieldName:E.localizeMessage("claim.email_to_ldap.ldapId","AD/LDAP ID");var d=void 0;d=e.window.mm_config.LdapPasswordFieldName?e.window.mm_config.LdapPasswordFieldName:E.localizeMessage("claim.email_to_ldap.ldapPwd","AD/LDAP Password");var f=void 0;return f=this.state.showMfa?M.default.createElement(h.default,{loginId:this.props.email,password:this.state.password,submit:this.submit}):M.default.createElement("form",{onSubmit:this.preSubmit,className:a},M.default.createElement("p",null,M.default.createElement(P.FormattedMessage,{id:"claim.email_to_ldap.ssoType",defaultMessage:"Upon claiming your account, you will only be able to login with AD/LDAP"})),M.default.createElement("p",null,M.default.createElement(P.FormattedMessage,{id:"claim.email_to_ldap.ssoNote",defaultMessage:"You must already have a valid AD/LDAP account"})),M.default.createElement("p",null,M.default.createElement(P.FormattedMessage,{id:"claim.email_to_ldap.enterPwd",defaultMessage:"Enter the password for your {site} email account",values:{site:e.window.mm_config.SiteName}})),M.default.createElement("input",{type:"text",style:{display:"none"},name:"fakeusernameremembered"}),M.default.createElement("div",{className:r},M.default.createElement("input",{type:"password",className:"form-control",name:"emailPassword",ref:"emailpassword",autoComplete:"off",placeholder:E.localizeMessage("claim.email_to_ldap.pwd","Password"),spellCheck:"false"})),l,M.default.createElement("p",null,M.default.createElement(P.FormattedMessage,{id:"claim.email_to_ldap.enterLdapPwd",defaultMessage:"Enter the ID and password for your AD/LDAP account"})),M.default.createElement("div",{className:n},M.default.createElement("input",{type:"text",className:"form-control",name:"ldapId",ref:"ldapid",autoComplete:"off",placeholder:u,spellCheck:"false"})),o,M.default.createElement("div",{className:i},M.default.createElement("input",{type:"password",className:"form-control",name:"ldapPassword",ref:"ldappassword",autoComplete:"off",placeholder:d,spellCheck:"false"})),s,M.default.createElement("button",{type:"submit",className:"btn btn-primary"},M.default.createElement(P.FormattedMessage,{id:"claim.email_to_ldap.switchTo",defaultMessage:"Switch account to AD/LDAP"})),t),M.default.createElement("div",null,M.default.createElement("h3",null,M.default.createElement(P.FormattedMessage,{id:"claim.email_to_ldap.title",defaultMessage:"Switch Email/Password Account to AD/LDAP"})),f)}}]),a}(M.default.Component);t.default=A,A.defaultProps={},A.propTypes={email:b.default.string}}).call(t,a(16))},1644:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function r(e,t,a){C.default.saveConfig(e,function(){t&&t()},function(e){a&&a(e)})}function o(e,t){C.default.reloadConfig(function(){D.getConfig(),e&&e()},function(e){t&&t(e)})}function n(e,t,a){C.default.adminResetMfa(e,function(){(0,T.getUser)(e)(I,R),t&&t()},function(e){a&&a(e)})}function s(e,t){C.default.getClusterStatus(function(t){e&&e(t)},function(e){D.dispatchError(e,"getClusterStatus"),t&&t(e)})}function i(e,t,a){C.default.saveComplianceReports(e,function(){t&&t()},function(e){a&&a(e)})}function u(e,t,a){C.default.testEmail(e,function(){t&&t()},function(e){a&&a(e)})}function d(e,t){C.default.ldapTest(function(){e&&e()},function(e){t&&t(e)})}function f(e,t){C.default.invalidateAllCaches(function(){e&&e()},function(e){t&&t(e)})}function c(e,t){C.default.recycleDatabaseConnection(function(){e&&e()},function(e){t&&t(e)})}function m(e,t,a,l){C.default.adminResetPassword(e,t,function(){a&&a()},function(e){l&&l(e)})}function p(e,t){C.default.samlCertificateStatus(function(t){e&&e(t)},function(e){t&&t(e)})}function h(e,t){C.default.ldapSyncNow(function(){e&&e()},function(e){t&&t(e)})}function v(e,t,a){C.default.getOAuthAppInfo(e,function(e){t&&t(e)},function(e){a&&a(e)})}function E(e,t,a){var l=e.response_type,r=e.client_id,o=e.redirect_uri,n=e.state,s=e.scope;C.default.allowOAuth2(l,r,o,n,s,function(e){t&&t(e)},function(e){a&&a(e)})}function g(e,t,a,l,r,o,n){C.default.emailToLdap(e,t,a,l,r,function(e){o&&o(e)},function(e){n&&n(e)})}function w(e,t,a,l,r,o){C.default.emailToOAuth(e,t,a,l,function(e){r&&r(e)},function(e){o&&o(e)})}function _(e,t,a,l){C.default.oauthToEmail(e,t,function(e){e.follow_link&&F.browserHistory.push(e.follow_link),a&&a(e)},function(e){l&&l(e)})}function b(e,t,a){C.default.regenerateOAuthAppSecret(e,function(e){t&&t(e)},function(e){a&&a(e)})}function y(e,t,a){C.default.uploadBrandImage(e,function(){t&&t()},function(e){a&&a(e)})}function M(e,t,a){C.default.uploadLicenseFile(e,function(){t&&t()},function(e){a&&a(e)})}function P(e,t){C.default.removeLicenseFile(function(){e&&e()},function(e){t&&t(e)})}function A(e,t,a){C.default.uploadCertificateFile(e,function(){t&&t()},function(e){a&&a(e)})}function S(e,t,a){C.default.removeCertificateFile(e,function(){t&&t()},function(e){a&&a(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.saveConfig=r,t.reloadConfig=o,t.adminResetMfa=n,t.getClusterStatus=s,t.saveComplianceReports=i,t.testEmail=u,t.ldapTest=d,t.invalidateAllCaches=f,t.recycleDatabaseConnection=c,t.adminResetPassword=m,t.samlCertificateStatus=p,t.ldapSyncNow=h,t.getOAuthAppInfo=v,t.allowOAuth2=E,t.emailToLdap=g,t.emailToOAuth=w,t.oauthToEmail=_,t.regenerateOAuthAppSecret=b,t.uploadBrandImage=y,t.uploadLicenseFile=M,t.removeLicenseFile=P,t.uploadCertificateFile=A,t.removeCertificateFile=S;var N=a(52),C=l(N),k=a(113),D=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(k),F=a(58),L=a(36),O=l(L),T=a(115),I=O.default.dispatch,R=O.default.getState},1785:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(51),o=l(r),n=a(32),s=l(n),i=a(33),u=l(i),d=a(50),f=l(d),c=a(49),m=l(c),p=a(28),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(p),v=a(197),E=a(151),g=l(E),w=a(14),_=l(w),b=function(e){function t(e){(0,s.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.state={serverError:""},a}return(0,m.default)(t,e),(0,u.default)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t={},a=this.refs.token.value.trim().replace(/\s/g,"");if(!a)return t.serverError=h.localizeMessage("login_mfa.tokenReq","Please enter an MFA token"),void this.setState(t);t.serverError="",this.setState(t),this.props.submit(this.props.loginId,this.props.password,a)}},{key:"render",value:function(){var e=void 0,t="";return this.state.serverError&&(e=_.default.createElement("label",{className:"control-label"},this.state.serverError),t=" has-error"),_.default.createElement("form",{onSubmit:this.handleSubmit},_.default.createElement("div",{className:"signup__email-container"},_.default.createElement("p",null,_.default.createElement(v.FormattedMessage,{id:"login_mfa.enterToken",defaultMessage:"To complete the sign in process, please enter a token from your smartphone's authenticator"})),_.default.createElement("div",{className:"form-group"+t},e),_.default.createElement("div",{className:"form-group"+t},_.default.createElement("input",{type:"text",className:"form-control",name:"token",ref:"token",placeholder:h.localizeMessage("login_mfa.token","MFA Token"),spellCheck:"false",autoComplete:"off",autoFocus:!0})),_.default.createElement("div",{className:"form-group"},_.default.createElement("button",{type:"submit",className:"btn btn-primary"},_.default.createElement(v.FormattedMessage,{id:"login_mfa.submit",defaultMessage:"Submit"})))))}}]),t}(_.default.Component);t.default=b,b.defaultProps={},b.propTypes={loginId:g.default.string.isRequired,password:g.default.string.isRequired,submit:g.default.func.isRequired}}});
//# sourceMappingURL=45.23899cd6295e93cd01b0.js.map