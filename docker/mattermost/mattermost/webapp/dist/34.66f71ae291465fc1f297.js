webpackJsonp([34],{1397:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(51),n=l(r),o=a(32),s=l(o),d=a(33),i=l(d),u=a(50),c=l(u),f=a(49),m=l(f),h=a(113),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(h),p=a(58),v=a(1922),_=l(v),b=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,i.default)(t,[{key:"performAction",value:function(e){var t=this;g.addOutgoingHook(e,function(e){p.browserHistory.push("/"+t.props.team.name+"/integrations/confirm?type=outgoing_webhooks&id="+e.id)},function(e){t.setState({saving:!1,serverError:e.message})})}},{key:"header",value:function(){return{id:"integrations.add",defaultMessage:"Add"}}},{key:"footer",value:function(){return{id:"add_outgoing_webhook.save",defaultMessage:"Save"}}},{key:"renderExtra",value:function(){return""}}]),t}(_.default);t.default=b},1424:function(e,t,a){a(0),a(0);t.__esModule=!0,t.default=function(e,t){var a={};for(var l in e)t.indexOf(l)>=0||Object.prototype.hasOwnProperty.call(e,l)&&(a[l]=e[l]);return a}},1518:function(e,t,a){e.exports=a.p+"files/1171271cb71e89919600b8c3ae1774cb.gif"},1522:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(77),n=l(r),o=a(51),s=l(o),d=a(32),i=l(d),u=a(33),c=l(u),f=a(50),m=l(f),h=a(49),g=l(h),p=a(151),v=l(p),_=a(14),b=l(_),y=function(e){function t(){return(0,i.default)(this,t),(0,m.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){if(!this.props.error&&0===this.props.errors.length)return null;var e=this.props.error;if(!e){var t=!0,a=!1,l=void 0;try{for(var r,o=(0,n.default)(this.props.errors);!(t=(r=o.next()).done);t=!0){var s=r.value;s&&(e=s)}}catch(e){a=!0,l=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw l}}}return e?"backstage"===this.props.type?b.default.createElement("div",{className:"pull-left has-error"},b.default.createElement("label",{className:"control-label"},e)):this.props.margin?b.default.createElement("div",{className:"form-group has-error"},b.default.createElement("label",{className:"control-label"},e)):b.default.createElement("div",{className:"col-sm-12 has-error"},b.default.createElement("label",{className:"control-label"},e)):null}}],[{key:"propTypes",get:function(){return{type:v.default.node,error:v.default.node,margin:v.default.bool,errors:v.default.arrayOf(v.default.node)}}},{key:"defaultProps",get:function(){return{error:null,errors:[]}}}]),t}(b.default.Component);t.default=y},1656:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(112),n=l(r),o=a(1424),s=l(o),d=a(51),i=l(d),u=a(32),c=l(u),f=a(33),m=l(f),h=a(50),g=l(h),p=a(49),v=l(p),_=a(151),b=l(_),y=a(14),E=l(y),k=a(1518),w=l(k),N=function(e){function t(){return(0,c.default)(this,t),(0,g.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this.props,t=e.spinning,a=e.children,l=(0,s.default)(e,["spinning","children"]);return t?E.default.createElement("img",{className:"spinner-button__gif",src:w.default}):E.default.createElement("button",(0,n.default)({className:"btn btn-primary"},l),a)}}],[{key:"propTypes",get:function(){return{children:b.default.node,spinning:b.default.bool.isRequired,onClick:b.default.func}}}]),t}(E.default.Component);t.default=N},1735:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(51),n=l(r),o=a(32),s=l(o),d=a(33),i=l(d),u=a(50),c=l(u),f=a(49),m=l(f),h=a(151),g=l(h),p=a(14),v=l(p),_=function(e){function t(){return(0,s.default)(this,t),(0,c.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=[];return v.default.Children.forEach(this.props.children,function(t,a){0!==a&&e.push(v.default.createElement("span",{key:"divider"+a,className:"backstage-header__divider"},v.default.createElement("i",{className:"fa fa-angle-right"}))),e.push(t)}),v.default.createElement("div",{className:"backstage-header"},v.default.createElement("h1",null,e))}}],[{key:"propTypes",get:function(){return{children:g.default.node}}}]),t}(v.default.Component);t.default=_},1780:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(51),n=l(r),o=a(32),s=l(o),d=a(50),i=l(d),u=a(33),c=l(u),f=a(49),m=l(f),h=a(14),g=l(h),p=a(151),v=l(p),_=a(10),b=l(_),y=a(29),E=l(y),k=a(28),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(k),N=a(201),M=function(e){function t(e){(0,s.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleChannelChange=a.handleChannelChange.bind(a),a.filterChannels=a.filterChannels.bind(a),a.state={channels:E.default.getAll().filter(a.filterChannels).sort(N.sortChannelsByDisplayName)},a}return(0,m.default)(t,e),(0,c.default)(t,null,[{key:"propTypes",get:function(){return{onChange:v.default.func,value:v.default.string,selectOpen:v.default.bool.isRequired,selectPrivate:v.default.bool.isRequired,selectDm:v.default.bool.isRequired}}},{key:"defaultProps",get:function(){return{selectOpen:!1,selectPrivate:!1,selectDm:!1}}}]),(0,c.default)(t,[{key:"componentDidMount",value:function(){E.default.addChangeListener(this.handleChannelChange)}},{key:"componentWillUnmount",value:function(){E.default.removeChangeListener(this.handleChannelChange)}},{key:"handleChannelChange",value:function(){this.setState({channels:E.default.getAll().filter(this.filterChannels).sort(N.sortChannelsByDisplayName)})}},{key:"filterChannels",value:function(e){return!!e.display_name}},{key:"render",value:function(){var e=this,t=[g.default.createElement("option",{key:"",value:""},w.localizeMessage("channel_select.placeholder","--- Select a channel ---"))];return this.state.channels.forEach(function(a){a.type===b.default.OPEN_CHANNEL&&e.props.selectOpen?t.push(g.default.createElement("option",{key:a.id,value:a.id},a.display_name)):a.type===b.default.PRIVATE_CHANNEL&&e.props.selectPrivate?t.push(g.default.createElement("option",{key:a.id,value:a.id},a.display_name)):a.type===b.default.DM_CHANNEL&&e.props.selectDm&&t.push(g.default.createElement("option",{key:a.id,value:a.id},a.display_name))}),g.default.createElement("select",{className:"form-control",value:this.props.value,onChange:this.props.onChange},t)}}]),t}(g.default.Component);t.default=M},1922:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(77),n=l(r),o=a(51),s=l(o),d=a(32),i=l(d),u=a(50),c=l(u),f=a(33),m=l(f),h=a(49),g=l(h),p=a(151),v=l(p),_=a(14),b=l(_),y=a(28),E=a(1735),k=l(E),w=a(1780),N=l(w),M=a(197),C=a(1522),T=l(C),W=a(58),F=a(1656),O=l(F),S=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));if(a.handleSubmit=a.handleSubmit.bind(a),a.updateDisplayName=a.updateDisplayName.bind(a),a.updateDescription=a.updateDescription.bind(a),a.updateContentType=a.updateContentType.bind(a),a.updateChannelId=a.updateChannelId.bind(a),a.updateTriggerWords=a.updateTriggerWords.bind(a),a.updateTriggerWhen=a.updateTriggerWhen.bind(a),a.updateCallbackUrls=a.updateCallbackUrls.bind(a),a.state={displayName:"",description:"",contentType:"application/x-www-form-urlencoded",channelId:"",triggerWords:"",triggerWhen:0,callbackUrls:"",saving:!1,serverError:"",clientError:null},void 0===a.performAction)throw new TypeError("Subclasses must override performAction");if(void 0===a.header)throw new TypeError("Subclasses must override header");if(void 0===a.footer)throw new TypeError("Subclasses must override footer");if(void 0===a.renderExtra)throw new TypeError("Subclasses must override renderExtra");return a.performAction=a.performAction.bind(a),a.header=a.header.bind(a),a.footer=a.footer.bind(a),a.renderExtra=a.renderExtra.bind(a),a}return(0,g.default)(t,e),(0,m.default)(t,null,[{key:"propTypes",get:function(){return{team:v.default.object}}}]),(0,m.default)(t,[{key:"handleSubmit",value:function(e){if(e.preventDefault(),!this.state.saving){this.setState({saving:!0,serverError:"",clientError:""});var t=[];if(this.state.triggerWords){var a=!0,l=!1,r=void 0;try{for(var o,s=(0,n.default)(this.state.triggerWords.split("\n"));!(a=(o=s.next()).done);a=!0){var d=o.value;d=d.trim(),d.length>0&&t.push(d)}}catch(e){l=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(l)throw r}}}if(!this.state.channelId&&0===t.length)return void this.setState({saving:!1,clientError:b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsOrChannelRequired",defaultMessage:"A valid channel or a list of trigger words is required"})});var i=[],u=!0,c=!1,f=void 0;try{for(var m,h=(0,n.default)(this.state.callbackUrls.split("\n"));!(u=(m=h.next()).done);u=!0){var g=m.value;g=g.trim(),g.length>0&&i.push(g)}}catch(e){c=!0,f=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw f}}if(0===i.length)return void this.setState({saving:!1,clientError:b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.callbackUrlsRequired",defaultMessage:"One or more callback URLs are required"})});var p={channel_id:this.state.channelId,trigger_words:t,trigger_when:parseInt(this.state.triggerWhen,10),callback_urls:i,display_name:this.state.displayName,content_type:this.state.contentType,description:this.state.description};this.performAction(p)}}},{key:"updateDisplayName",value:function(e){this.setState({displayName:e.target.value})}},{key:"updateDescription",value:function(e){this.setState({description:e.target.value})}},{key:"updateContentType",value:function(e){this.setState({contentType:e.target.value})}},{key:"updateChannelId",value:function(e){this.setState({channelId:e.target.value})}},{key:"updateTriggerWords",value:function(e){this.setState({triggerWords:e.target.value})}},{key:"updateTriggerWhen",value:function(e){this.setState({triggerWhen:e.target.value})}},{key:"updateCallbackUrls",value:function(e){this.setState({callbackUrls:e.target.value})}},{key:"render",value:function(){var e=this.header(),t=this.footer(),a=this.renderExtra();return b.default.createElement("div",{className:"backstage-content"},b.default.createElement(k.default,null,b.default.createElement(W.Link,{to:"/"+this.props.team.name+"/integrations/outgoing_webhooks"},b.default.createElement(M.FormattedMessage,{id:"installed_outgoing_webhooks.header",defaultMessage:"Outgoing Webhooks"})),b.default.createElement(M.FormattedMessage,{id:e.id,defaultMessage:e.defaultMessage})),b.default.createElement("div",{className:"backstage-form"},b.default.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},b.default.createElement("div",{className:"form-group"},b.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"displayName"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.displayName",defaultMessage:"Display Name"})),b.default.createElement("div",{className:"col-md-5 col-sm-8"},b.default.createElement("input",{id:"displayName",type:"text",maxLength:"64",className:"form-control",value:this.state.displayName,onChange:this.updateDisplayName}),b.default.createElement("div",{className:"form__help"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.displayName.help",defaultMessage:"Display name for your incoming webhook made of up to 64 characters."})))),b.default.createElement("div",{className:"form-group"},b.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"description"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.description",defaultMessage:"Description"})),b.default.createElement("div",{className:"col-md-5 col-sm-8"},b.default.createElement("input",{id:"description",type:"text",maxLength:"128",className:"form-control",value:this.state.description,onChange:this.updateDescription}),b.default.createElement("div",{className:"form__help"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.description.help",defaultMessage:"Description for your incoming webhook."})))),b.default.createElement("div",{className:"form-group"},b.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"contentType"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.content_Type",defaultMessage:"Content Type"})),b.default.createElement("div",{className:"col-md-5 col-sm-8"},b.default.createElement("select",{className:"form-control",value:this.state.contentType,onChange:this.updateContentType},b.default.createElement("option",{value:"application/x-www-form-urlencoded"},"application/x-www-form-urlencoded"),b.default.createElement("option",{value:"application/json"},"application/json")),b.default.createElement("div",{className:"form__help"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.contentType.help1",defaultMessage:"Choose the content type by which the response will be sent."})),b.default.createElement("div",{className:"form__help"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.contentType.help2",defaultMessage:"If application/x-www-form-urlencoded is chosen, the server assumes you will be encoding the parameters in a URL format."})),b.default.createElement("div",{className:"form__help"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.contentType.help3",defaultMessage:"If application/json is chosen, the server assumes you will posting JSON data."})))),b.default.createElement("div",{className:"form-group"},b.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"channelId"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.channel",defaultMessage:"Channel"})),b.default.createElement("div",{className:"col-md-5 col-sm-8"},b.default.createElement(N.default,{id:"channelId",value:this.state.channelId,onChange:this.updateChannelId,selectOpen:!0}),b.default.createElement("div",{className:"form__help"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.channel.help",defaultMessage:"Public channel to receive webhook payloads. Optional if at least one Trigger Word is specified."})))),b.default.createElement("div",{className:"form-group"},b.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"triggerWords"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.triggerWords",defaultMessage:"Trigger Words (One Per Line)"})),b.default.createElement("div",{className:"col-md-5 col-sm-8"},b.default.createElement("textarea",{id:"triggerWords",rows:"3",maxLength:"1000",className:"form-control",value:this.state.triggerWords,onChange:this.updateTriggerWords}),b.default.createElement("div",{className:"form__help"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.triggerWords.help",defaultMessage:"Messages that start with one of the specified words will trigger the outgoing webhook. Optional if Channel is selected."})))),b.default.createElement("div",{className:"form-group"},b.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"triggerWords"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsTriggerWhen",defaultMessage:"Trigger When"})),b.default.createElement("div",{className:"col-md-5 col-sm-8"},b.default.createElement("select",{className:"form-control",value:this.state.triggerWhen,onChange:this.updateTriggerWhen},b.default.createElement("option",{value:"0"},(0,y.localizeMessage)("add_outgoing_webhook.triggerWordsTriggerWhenFullWord","First word matches a trigger word exactly")),b.default.createElement("option",{value:"1"},(0,y.localizeMessage)("add_outgoing_webhook.triggerWordsTriggerWhenStartsWith","First word starts with a trigger word"))),b.default.createElement("div",{className:"form__help"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.triggerWordsTriggerWhen.help",defaultMessage:"Choose when to trigger the outgoing webhook; if the first word of a message matches a Trigger Word exactly, or if it starts with a Trigger Word."})))),b.default.createElement("div",{className:"form-group"},b.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"callbackUrls"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.callbackUrls",defaultMessage:"Callback URLs (One Per Line)"})),b.default.createElement("div",{className:"col-md-5 col-sm-8"},b.default.createElement("textarea",{id:"callbackUrls",rows:"3",maxLength:"1000",className:"form-control",value:this.state.callbackUrls,onChange:this.updateCallbackUrls}),b.default.createElement("div",{className:"form__help"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.callbackUrls.help",defaultMessage:"The URL that messages will be sent to."})))),b.default.createElement("div",{className:"backstage-form__footer"},b.default.createElement(T.default,{type:"backstage",errors:[this.state.serverError,this.state.clientError]}),b.default.createElement(W.Link,{className:"btn btn-sm",to:"/"+this.props.team.name+"/integrations/outgoing_webhooks"},b.default.createElement(M.FormattedMessage,{id:"add_outgoing_webhook.cancel",defaultMessage:"Cancel"})),b.default.createElement(O.default,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},b.default.createElement(M.FormattedMessage,{id:t.id,defaultMessage:t.defaultMessage})),a))))}}]),t}(b.default.Component);t.default=S}});
//# sourceMappingURL=34.66f71ae291465fc1f297.js.map