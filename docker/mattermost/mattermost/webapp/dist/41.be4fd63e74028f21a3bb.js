webpackJsonp([41],{1419:function(e,t,a){"use strict";(function(e){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(51),s=n(l),i=a(32),o=n(i),u=a(50),d=n(u),c=a(33),f=n(c),m=a(49),p=n(m),h=a(1522),g=n(h),v=a(93),_=r(v),E=a(1640),y=a(114),w=a(204),T=a(28),b=r(T),L=a(151),M=n(L),I=a(14),S=n(I),N=a(197),k=a(58),P=a(1737),C=n(P),F=function(t){function a(e){(0,o.default)(this,a);var t=(0,d.default)(this,(a.__proto__||(0,s.default)(a)).call(this,e));return t.handleLdapSignup=t.handleLdapSignup.bind(t),t.handleLdapSignupSuccess=t.handleLdapSignupSuccess.bind(t),t.handleLdapIdChange=t.handleLdapIdChange.bind(t),t.handleLdapPasswordChange=t.handleLdapPasswordChange.bind(t),t.state={ldapError:"",ldapId:"",ldapPassword:""},t}return(0,p.default)(a,t),(0,f.default)(a,null,[{key:"propTypes",get:function(){return{location:M.default.object}}}]),(0,f.default)(a,[{key:"componentDidMount",value:function(){(0,w.trackEvent)("signup","signup_user_01_welcome")}},{key:"handleLdapIdChange",value:function(e){this.setState({ldapId:e.target.value})}},{key:"handleLdapPasswordChange",value:function(e){this.setState({ldapPassword:e.target.value})}},{key:"handleLdapSignup",value:function(e){var t=this;e.preventDefault(),this.setState({ldapError:""}),(0,y.webLoginByLdap)(this.state.ldapId,this.state.ldapPassword,null,this.handleLdapSignupSuccess,function(e){t.setState({ldapError:e.message})})}},{key:"handleLdapSignupSuccess",value:function(){var e=this,t=this.props.location.query.h,a=this.props.location.query.d,r=this.props.location.query.id;r||t?(0,E.addUserToTeamFromInvite)(a,t,r,function(){e.finishSignup()},function(){e.finishSignup()}):this.finishSignup()}},{key:"finishSignup",value:function(){var e=this;(0,y.loadMe)(function(){var t=e.props.location.query;_.loadDefaultLocale(),t.redirect_to?k.browserHistory.push(t.redirect_to):_.redirectUserToDefaultTeam()})}},{key:"render",value:function(){var t=void 0;t=e.window.mm_config.LdapLoginFieldName?e.window.mm_config.LdapLoginFieldName:b.localizeMessage("login.ldapUsername","AD/LDAP Username");var a="";this.state.ldapError&&(a+=" has-error");var r=void 0;if("true"!==e.window.mm_config.EnableLdap||"true"!==e.window.mm_license.IsLicensed||!e.window.mm_license.LDAP)return null;r=S.default.createElement("div",{className:"inner__content"},S.default.createElement("h5",null,S.default.createElement("strong",null,S.default.createElement(N.FormattedMessage,{id:"signup.ldap",defaultMessage:"AD/LDAP Credentials"}))),S.default.createElement("form",{onSubmit:this.handleLdapSignup},S.default.createElement("div",{className:"signup__email-container"},S.default.createElement(g.default,{error:this.state.ldapError,margin:!0}),S.default.createElement("div",{className:"form-group"+a},S.default.createElement("input",{className:"form-control",name:"ldapId",value:this.state.ldapId,placeholder:t,onChange:this.handleLdapIdChange,spellCheck:"false",autoCapitalize:"off"})),S.default.createElement("div",{className:"form-group"+a},S.default.createElement("input",{type:"password",className:"form-control",name:"password",value:this.state.ldapPassword,placeholder:b.localizeMessage("login.password","Password"),onChange:this.handleLdapPasswordChange,spellCheck:"false"})),S.default.createElement("div",{className:"form-group"},S.default.createElement("button",{type:"submit",className:"btn btn-primary",disabled:!this.state.ldapId||!this.state.ldapPassword},S.default.createElement(N.FormattedMessage,{id:"login.signIn",defaultMessage:"Sign in"}))))));var n=null;r&&(n=S.default.createElement("p",null,S.default.createElement(N.FormattedHTMLMessage,{id:"create_team.agreement",defaultMessage:"By proceeding to create your account and use {siteName}, you agree to our <a href='{TermsOfServiceLink}'>Terms of Service</a> and <a href='{PrivacyPolicyLink}'>Privacy Policy</a>. If you do not agree, you cannot use {siteName}.",values:{siteName:e.window.mm_config.SiteName,TermsOfServiceLink:e.window.mm_config.TermsOfServiceLink,PrivacyPolicyLink:e.window.mm_config.PrivacyPolicyLink}})));var l=null;return l="true"===e.window.mm_license.IsLicensed&&"true"===e.window.mm_license.CustomBrand&&"true"===e.window.mm_config.EnableCustomBrand?e.window.mm_config.CustomDescriptionText:S.default.createElement(N.FormattedMessage,{id:"web.root.signup_info",defaultMessage:"All team communication in one place, searchable and accessible anywhere"}),S.default.createElement("div",null,S.default.createElement("div",{className:"signup-header"},S.default.createElement(k.Link,{to:"/"},S.default.createElement("span",{className:"fa fa-chevron-left"}),S.default.createElement(N.FormattedMessage,{id:"web.header.back"}))),S.default.createElement("div",{className:"col-sm-12"},S.default.createElement("div",{className:"signup-team__container padding--less"},S.default.createElement("img",{className:"signup-team-logo",src:C.default}),S.default.createElement("h1",null,e.window.mm_config.SiteName),S.default.createElement("h4",{className:"color--light"},l),S.default.createElement("h4",{className:"color--light"},S.default.createElement(N.FormattedMessage,{id:"signup_user_completed.lets",defaultMessage:"Let's create your account"})),S.default.createElement("span",{className:"color--light"},S.default.createElement(N.FormattedMessage,{id:"signup_user_completed.haveAccount",defaultMessage:"Already have an account?"})," ",S.default.createElement(k.Link,{to:"/login",query:this.props.location.query},S.default.createElement(N.FormattedMessage,{id:"signup_user_completed.signIn",defaultMessage:"Click here to sign in."}))),r,n)))}}]),a}(S.default.Component);t.default=F}).call(t,a(16))},1522:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(77),l=r(n),s=a(51),i=r(s),o=a(32),u=r(o),d=a(33),c=r(d),f=a(50),m=r(f),p=a(49),h=r(p),g=a(151),v=r(g),_=a(14),E=r(_),y=function(e){function t(){return(0,u.default)(this,t),(0,m.default)(this,(t.__proto__||(0,i.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){if(!this.props.error&&0===this.props.errors.length)return null;var e=this.props.error;if(!e){var t=!0,a=!1,r=void 0;try{for(var n,s=(0,l.default)(this.props.errors);!(t=(n=s.next()).done);t=!0){var i=n.value;i&&(e=i)}}catch(e){a=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw r}}}return e?"backstage"===this.props.type?E.default.createElement("div",{className:"pull-left has-error"},E.default.createElement("label",{className:"control-label"},e)):this.props.margin?E.default.createElement("div",{className:"form-group has-error"},E.default.createElement("label",{className:"control-label"},e)):E.default.createElement("div",{className:"col-sm-12 has-error"},E.default.createElement("label",{className:"control-label"},e)):null}}],[{key:"propTypes",get:function(){return{type:v.default.node,error:v.default.node,margin:v.default.bool,errors:v.default.arrayOf(v.default.node)}}},{key:"defaultProps",get:function(){return{error:null,errors:[]}}}]),t}(E.default.Component);t.default=y},1640:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t,a){(0,k.checkIfTeamExists)(e)(F,U).then(function(e){if(null!=e&&t)t(e);else if(null==e&&a){var r=U().requests.teams.getTeam.error;a((0,v.default)({id:r.server_error_id},r))}})}function l(e,t,a){(0,k.createTeam)(e)(F,U).then(function(e){if(e&&t)L.browserHistory.push("/"+e.name+"/channels/town-square"),t(e);else if(null==e&&a){var r=U().requests.teams.createTeam.error;a((0,v.default)({id:r.server_error_id},r))}})}function s(e,t,a){(0,k.updateTeam)(e)(F,U).then(function(e){if(e&&t)L.browserHistory.push("/"+e.name+"/channels/town-square"),t(e);else if(null==e&&a){var r=U().requests.teams.updateTeam.error;a((0,v.default)({id:r.server_error_id},r))}})}function i(e,t,a,r){(0,k.removeUserFromTeam)(e,t)(F,U).then(function(n){if((0,S.getUser)(t)(F,U),(0,k.getTeamStats)(e)(F,U),n&&a)a();else if(null==n&&r){var l=U().requests.teams.removeUserFromTeam.error;r((0,v.default)({id:l.server_error_id},l))}})}function o(e,t,a,r,n){(0,k.updateTeamMemberRoles)(e,t,a)(F,U).then(function(e){if(e&&r)r();else if(null==e&&n){var t=U().requests.teams.updateTeamMember.error;n((0,v.default)({id:t.server_error_id},t))}})}function u(e,t,a,r,n){b.default.addUserToTeamFromInvite(e,t,a,function(e){var t={team_id:e.id,user_id:U().entities.users.currentUserId,roles:"team_user",delete_at:0,msg_count:0,mention_count:0};F((0,C.batchActions)([{type:P.TeamTypes.RECEIVED_TEAMS_LIST,data:[e]},{type:P.TeamTypes.RECEIVED_MY_TEAM_MEMBER,data:t}])),r&&r(e)},function(e){n&&n(e)})}function d(e,t,a,r){(0,k.addUsersToTeam)(e,t)(F,U).then(function(e){if(e&&a)a(e);else if(null==e&&r){var t=U().requests.teams.addUserToTeam.error;r((0,v.default)({id:t.server_error_id},t))}})}function c(e,t,a){b.default.getInviteInfo(e,function(e){t&&t(e)},function(e){a&&a(e)})}function f(e,t,a){e.invites||t();var r=[];e.invites.forEach(function(e){r.push(e.email)}),(0,k.sendEmailInvitesToTeam)(E.default.getCurrentId(),r)(F,U).then(function(e){if(e&&t)t();else if(null==e&&a){var r=U().requests.teams.emailInvite.error;a((0,v.default)({id:r.server_error_id},r))}})}function m(e){(0,N.viewChannel)(w.default.getCurrentId())(F,U),L.browserHistory.push(e)}function p(e,t,a){(0,k.getTeamsForUser)(e)(F,U).then(function(e){if(e&&t)t(e);else if(null==e&&a){var r=U().requests.teams.getTeams.error;a((0,v.default)({id:r.server_error_id},r))}})}function h(e,t,a){(0,k.getTeamMembersForUser)(e)(F,U).then(function(e){if(e&&t)t(e);else if(null==e&&a){var r=U().requests.teams.getTeamMembers.error;a((0,v.default)({id:r.server_error_id},r))}})}Object.defineProperty(t,"__esModule",{value:!0});var g=a(112),v=r(g);t.checkIfTeamExists=n,t.createTeam=l,t.updateTeam=s,t.removeUserFromTeam=i,t.updateTeamMemberRoles=o,t.addUserToTeamFromInvite=u,t.addUsersToTeam=d,t.getInviteInfo=c,t.inviteMembers=f,t.switchTeams=m,t.getTeamsForUser=p,t.getTeamMembersForUser=h;var _=a(43),E=r(_),y=a(29),w=r(y),T=a(52),b=r(T),L=a(58),M=a(36),I=r(M),S=a(115),N=a(79),k=a(200),P=a(4),C=a(81),F=I.default.dispatch,U=I.default.getState},1737:function(e,t,a){e.exports=a.p+"files/5d6be4015bde2a4e0358c8bc110deadc.png"}});
//# sourceMappingURL=41.be4fd63e74028f21a3bb.js.map