webpackJsonp([44],{1375:function(e,t,a){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(51),l=n(o),u=a(32),i=n(u),r=a(33),s=n(r),f=a(50),c=n(f),d=a(49),m=n(d),p=a(1785),h=n(p),v=a(28),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(v),_=a(10),w=n(_),y=a(114),b=a(1644),E=a(151),S=n(E),M=a(14),C=n(M),T=a(483),k=n(T),O=a(197),A=function(t){function a(e){(0,i.default)(this,a);var t=(0,c.default)(this,(a.__proto__||(0,l.default)(a)).call(this,e));return t.submit=t.submit.bind(t),t.preSubmit=t.preSubmit.bind(t),t.state={showMfa:!1,password:""},t}return(0,m.default)(a,t),(0,s.default)(a,[{key:"preSubmit",value:function(e){var t=this;e.preventDefault();var a={},n=k.default.findDOMNode(this.refs.password).value;if(!n)return a.error=g.localizeMessage("claim.email_to_oauth.pwdError","Please enter your password."),void this.setState(a);this.setState({password:n}),a.error=null,this.setState(a),(0,y.checkMfa)(this.props.email,function(e){e?t.setState({showMfa:!0}):t.submit(t.props.email,n,"")},function(e){t.setState({error:e.message})})}},{key:"submit",value:function(e,t,a){var n=this;(0,b.emailToOAuth)(e,t,a,this.props.newType,function(e){e.follow_link&&(window.location.href=e.follow_link)},function(e){n.setState({error:e.message,showMfa:!1})})}},{key:"render",value:function(){var t=null;this.state.error&&(t=C.default.createElement("div",{className:"form-group has-error"},C.default.createElement("label",{className:"control-label"},this.state.error)));var a="form-group";t&&(a+=" has-error");var n=this.props.newType===w.default.SAML_SERVICE?w.default.SAML_SERVICE.toUpperCase():g.toTitleCase(this.props.newType),o=n+" SSO",l=void 0;return l=this.state.showMfa?C.default.createElement(h.default,{loginId:this.props.email,password:this.state.password,submit:this.submit}):C.default.createElement("form",{onSubmit:this.preSubmit},C.default.createElement("p",null,C.default.createElement(O.FormattedMessage,{id:"claim.email_to_oauth.ssoType",defaultMessage:"Upon claiming your account, you will only be able to login with {type} SSO",values:{type:n}})),C.default.createElement("p",null,C.default.createElement(O.FormattedMessage,{id:"claim.email_to_oauth.ssoNote",defaultMessage:"You must already have a valid {type} account",values:{type:n}})),C.default.createElement("p",null,C.default.createElement(O.FormattedMessage,{id:"claim.email_to_oauth.enterPwd",defaultMessage:"Enter the password for your {site} account",values:{site:e.window.mm_config.SiteName}})),C.default.createElement("div",{className:a},C.default.createElement("input",{type:"password",className:"form-control",name:"password",ref:"password",placeholder:g.localizeMessage("claim.email_to_oauth.pwd","Password"),spellCheck:"false"})),t,C.default.createElement("button",{type:"submit",className:"btn btn-primary"},C.default.createElement(O.FormattedMessage,{id:"claim.email_to_oauth.switchTo",defaultMessage:"Switch account to {uiType}",values:{uiType:o}}))),C.default.createElement("div",null,C.default.createElement("h3",null,C.default.createElement(O.FormattedMessage,{id:"claim.email_to_oauth.title",defaultMessage:"Switch Email/Password Account to {uiType}",values:{uiType:o}})),l)}}]),a}(C.default.Component);t.default=A,A.defaultProps={},A.propTypes={newType:S.default.string,email:S.default.string}}).call(t,a(16))},1644:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,a){O.default.saveConfig(e,function(){t&&t()},function(e){a&&a(e)})}function l(e,t){O.default.reloadConfig(function(){F.getConfig(),e&&e()},function(e){t&&t(e)})}function u(e,t,a){O.default.adminResetMfa(e,function(){(0,I.getUser)(e)(L,j),t&&t()},function(e){a&&a(e)})}function i(e,t){O.default.getClusterStatus(function(t){e&&e(t)},function(e){F.dispatchError(e,"getClusterStatus"),t&&t(e)})}function r(e,t,a){O.default.saveComplianceReports(e,function(){t&&t()},function(e){a&&a(e)})}function s(e,t,a){O.default.testEmail(e,function(){t&&t()},function(e){a&&a(e)})}function f(e,t){O.default.ldapTest(function(){e&&e()},function(e){t&&t(e)})}function c(e,t){O.default.invalidateAllCaches(function(){e&&e()},function(e){t&&t(e)})}function d(e,t){O.default.recycleDatabaseConnection(function(){e&&e()},function(e){t&&t(e)})}function m(e,t,a,n){O.default.adminResetPassword(e,t,function(){a&&a()},function(e){n&&n(e)})}function p(e,t){O.default.samlCertificateStatus(function(t){e&&e(t)},function(e){t&&t(e)})}function h(e,t){O.default.ldapSyncNow(function(){e&&e()},function(e){t&&t(e)})}function v(e,t,a){O.default.getOAuthAppInfo(e,function(e){t&&t(e)},function(e){a&&a(e)})}function g(e,t,a){var n=e.response_type,o=e.client_id,l=e.redirect_uri,u=e.state,i=e.scope;O.default.allowOAuth2(n,o,l,u,i,function(e){t&&t(e)},function(e){a&&a(e)})}function _(e,t,a,n,o,l,u){O.default.emailToLdap(e,t,a,n,o,function(e){l&&l(e)},function(e){u&&u(e)})}function w(e,t,a,n,o,l){O.default.emailToOAuth(e,t,a,n,function(e){o&&o(e)},function(e){l&&l(e)})}function y(e,t,a,n){O.default.oauthToEmail(e,t,function(e){e.follow_link&&N.browserHistory.push(e.follow_link),a&&a(e)},function(e){n&&n(e)})}function b(e,t,a){O.default.regenerateOAuthAppSecret(e,function(e){t&&t(e)},function(e){a&&a(e)})}function E(e,t,a){O.default.uploadBrandImage(e,function(){t&&t()},function(e){a&&a(e)})}function S(e,t,a){O.default.uploadLicenseFile(e,function(){t&&t()},function(e){a&&a(e)})}function M(e,t){O.default.removeLicenseFile(function(){e&&e()},function(e){t&&t(e)})}function C(e,t,a){O.default.uploadCertificateFile(e,function(){t&&t()},function(e){a&&a(e)})}function T(e,t,a){O.default.removeCertificateFile(e,function(){t&&t()},function(e){a&&a(e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.saveConfig=o,t.reloadConfig=l,t.adminResetMfa=u,t.getClusterStatus=i,t.saveComplianceReports=r,t.testEmail=s,t.ldapTest=f,t.invalidateAllCaches=c,t.recycleDatabaseConnection=d,t.adminResetPassword=m,t.samlCertificateStatus=p,t.ldapSyncNow=h,t.getOAuthAppInfo=v,t.allowOAuth2=g,t.emailToLdap=_,t.emailToOAuth=w,t.oauthToEmail=y,t.regenerateOAuthAppSecret=b,t.uploadBrandImage=E,t.uploadLicenseFile=S,t.removeLicenseFile=M,t.uploadCertificateFile=C,t.removeCertificateFile=T;var k=a(52),O=n(k),A=a(113),F=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(A),N=a(58),P=a(36),R=n(P),I=a(115),L=R.default.dispatch,j=R.default.getState},1785:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(51),l=n(o),u=a(32),i=n(u),r=a(33),s=n(r),f=a(50),c=n(f),d=a(49),m=n(d),p=a(28),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(p),v=a(197),g=a(151),_=n(g),w=a(14),y=n(w),b=function(e){function t(e){(0,i.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.state={serverError:""},a}return(0,m.default)(t,e),(0,s.default)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t={},a=this.refs.token.value.trim().replace(/\s/g,"");if(!a)return t.serverError=h.localizeMessage("login_mfa.tokenReq","Please enter an MFA token"),void this.setState(t);t.serverError="",this.setState(t),this.props.submit(this.props.loginId,this.props.password,a)}},{key:"render",value:function(){var e=void 0,t="";return this.state.serverError&&(e=y.default.createElement("label",{className:"control-label"},this.state.serverError),t=" has-error"),y.default.createElement("form",{onSubmit:this.handleSubmit},y.default.createElement("div",{className:"signup__email-container"},y.default.createElement("p",null,y.default.createElement(v.FormattedMessage,{id:"login_mfa.enterToken",defaultMessage:"To complete the sign in process, please enter a token from your smartphone's authenticator"})),y.default.createElement("div",{className:"form-group"+t},e),y.default.createElement("div",{className:"form-group"+t},y.default.createElement("input",{type:"text",className:"form-control",name:"token",ref:"token",placeholder:h.localizeMessage("login_mfa.token","MFA Token"),spellCheck:"false",autoComplete:"off",autoFocus:!0})),y.default.createElement("div",{className:"form-group"},y.default.createElement("button",{type:"submit",className:"btn btn-primary"},y.default.createElement(v.FormattedMessage,{id:"login_mfa.submit",defaultMessage:"Submit"})))))}}]),t}(y.default.Component);t.default=b,b.defaultProps={},b.propTypes={loginId:_.default.string.isRequired,password:_.default.string.isRequired,submit:_.default.func.isRequired}}});
//# sourceMappingURL=44.0ebda67b57af0a64ab76.js.map