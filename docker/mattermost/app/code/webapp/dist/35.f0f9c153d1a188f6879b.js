webpackJsonp([35],{1395:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(51),r=n(l),s=a(32),o=n(s),i=a(33),u=n(i),d=a(50),c=n(d),f=a(49),m=n(f),p=a(113),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(p),g=a(58),v=a(1921),_=n(v),y=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"performAction",value:function(e){var t=this;h.addIncomingHook(e,function(e){g.browserHistory.push("/"+t.props.team.name+"/integrations/confirm?type=incoming_webhooks&id="+e.id)},function(e){t.setState({saving:!1,serverError:e.message})})}},{key:"header",value:function(){return{id:"integrations.add",defaultMessage:"Add"}}},{key:"footer",value:function(){return{id:"add_incoming_webhook.save",defaultMessage:"Save"}}}]),t}(_.default);t.default=y},1424:function(e,t,a){a(0),a(0);t.__esModule=!0,t.default=function(e,t){var a={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a}},1518:function(e,t,a){e.exports=a.p+"files/1171271cb71e89919600b8c3ae1774cb.gif"},1522:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(77),r=n(l),s=a(51),o=n(s),i=a(32),u=n(i),d=a(33),c=n(d),f=a(50),m=n(f),p=a(49),h=n(p),g=a(151),v=n(g),_=a(14),y=n(_),b=function(e){function t(){return(0,u.default)(this,t),(0,m.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){if(!this.props.error&&0===this.props.errors.length)return null;var e=this.props.error;if(!e){var t=!0,a=!1,n=void 0;try{for(var l,s=(0,r.default)(this.props.errors);!(t=(l=s.next()).done);t=!0){var o=l.value;o&&(e=o)}}catch(e){a=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(a)throw n}}}return e?"backstage"===this.props.type?y.default.createElement("div",{className:"pull-left has-error"},y.default.createElement("label",{className:"control-label"},e)):this.props.margin?y.default.createElement("div",{className:"form-group has-error"},y.default.createElement("label",{className:"control-label"},e)):y.default.createElement("div",{className:"col-sm-12 has-error"},y.default.createElement("label",{className:"control-label"},e)):null}}],[{key:"propTypes",get:function(){return{type:v.default.node,error:v.default.node,margin:v.default.bool,errors:v.default.arrayOf(v.default.node)}}},{key:"defaultProps",get:function(){return{error:null,errors:[]}}}]),t}(y.default.Component);t.default=b},1656:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(112),r=n(l),s=a(1424),o=n(s),i=a(51),u=n(i),d=a(32),c=n(d),f=a(33),m=n(f),p=a(50),h=n(p),g=a(49),v=n(g),_=a(151),y=n(_),b=a(14),E=n(b),k=a(1518),N=n(k),M=function(e){function t(){return(0,c.default)(this,t),(0,h.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,v.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this.props,t=e.spinning,a=e.children,n=(0,o.default)(e,["spinning","children"]);return t?E.default.createElement("img",{className:"spinner-button__gif",src:N.default}):E.default.createElement("button",(0,r.default)({className:"btn btn-primary"},n),a)}}],[{key:"propTypes",get:function(){return{children:y.default.node,spinning:y.default.bool.isRequired,onClick:y.default.func}}}]),t}(E.default.Component);t.default=M},1735:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(51),r=n(l),s=a(32),o=n(s),i=a(33),u=n(i),d=a(50),c=n(d),f=a(49),m=n(f),p=a(151),h=n(p),g=a(14),v=n(g),_=function(e){function t(){return(0,o.default)(this,t),(0,c.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=[];return v.default.Children.forEach(this.props.children,function(t,a){0!==a&&e.push(v.default.createElement("span",{key:"divider"+a,className:"backstage-header__divider"},v.default.createElement("i",{className:"fa fa-angle-right"}))),e.push(t)}),v.default.createElement("div",{className:"backstage-header"},v.default.createElement("h1",null,e))}}],[{key:"propTypes",get:function(){return{children:h.default.node}}}]),t}(v.default.Component);t.default=_},1780:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(51),r=n(l),s=a(32),o=n(s),i=a(50),u=n(i),d=a(33),c=n(d),f=a(49),m=n(f),p=a(14),h=n(p),g=a(151),v=n(g),_=a(10),y=n(_),b=a(29),E=n(b),k=a(28),N=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(k),M=a(201),C=function(e){function t(e){(0,o.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.handleChannelChange=a.handleChannelChange.bind(a),a.filterChannels=a.filterChannels.bind(a),a.state={channels:E.default.getAll().filter(a.filterChannels).sort(M.sortChannelsByDisplayName)},a}return(0,m.default)(t,e),(0,c.default)(t,null,[{key:"propTypes",get:function(){return{onChange:v.default.func,value:v.default.string,selectOpen:v.default.bool.isRequired,selectPrivate:v.default.bool.isRequired,selectDm:v.default.bool.isRequired}}},{key:"defaultProps",get:function(){return{selectOpen:!1,selectPrivate:!1,selectDm:!1}}}]),(0,c.default)(t,[{key:"componentDidMount",value:function(){E.default.addChangeListener(this.handleChannelChange)}},{key:"componentWillUnmount",value:function(){E.default.removeChangeListener(this.handleChannelChange)}},{key:"handleChannelChange",value:function(){this.setState({channels:E.default.getAll().filter(this.filterChannels).sort(M.sortChannelsByDisplayName)})}},{key:"filterChannels",value:function(e){return!!e.display_name}},{key:"render",value:function(){var e=this,t=[h.default.createElement("option",{key:"",value:""},N.localizeMessage("channel_select.placeholder","--- Select a channel ---"))];return this.state.channels.forEach(function(a){a.type===y.default.OPEN_CHANNEL&&e.props.selectOpen?t.push(h.default.createElement("option",{key:a.id,value:a.id},a.display_name)):a.type===y.default.PRIVATE_CHANNEL&&e.props.selectPrivate?t.push(h.default.createElement("option",{key:a.id,value:a.id},a.display_name)):a.type===y.default.DM_CHANNEL&&e.props.selectDm&&t.push(h.default.createElement("option",{key:a.id,value:a.id},a.display_name))}),h.default.createElement("select",{className:"form-control",value:this.props.value,onChange:this.props.onChange},t)}}]),t}(h.default.Component);t.default=C},1921:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(51),r=n(l),s=a(32),o=n(s),i=a(50),u=n(i),d=a(33),c=n(d),f=a(49),m=n(f),p=a(151),h=n(p),g=a(14),v=n(g),_=a(1735),y=n(_),b=a(1780),E=n(b),k=a(197),N=a(1522),M=n(N),C=a(1656),w=n(C),D=a(58),O=function(e){function t(e){(0,o.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));if(a.handleSubmit=a.handleSubmit.bind(a),a.updateDisplayName=a.updateDisplayName.bind(a),a.updateDescription=a.updateDescription.bind(a),a.updateChannelId=a.updateChannelId.bind(a),a.state={displayName:"",description:"",channelId:"",saving:!1,serverError:"",clientError:null},void 0===a.performAction)throw new TypeError("Subclasses must override performAction");if(void 0===a.header)throw new TypeError("Subclasses must override header");if(void 0===a.footer)throw new TypeError("Subclasses must override footer");return a.performAction=a.performAction.bind(a),a.header=a.header.bind(a),a.footer=a.footer.bind(a),a}return(0,m.default)(t,e),(0,c.default)(t,null,[{key:"propTypes",get:function(){return{team:h.default.object}}}]),(0,c.default)(t,[{key:"handleSubmit",value:function(e){if(e.preventDefault(),!this.state.saving){if(this.setState({saving:!0,serverError:"",clientError:""}),!this.state.channelId)return void this.setState({saving:!1,clientError:v.default.createElement(k.FormattedMessage,{id:"add_incoming_webhook.channelRequired",defaultMessage:"A valid channel is required"})});var t={channel_id:this.state.channelId,display_name:this.state.displayName,description:this.state.description};this.performAction(t)}}},{key:"updateDisplayName",value:function(e){this.setState({displayName:e.target.value})}},{key:"updateDescription",value:function(e){this.setState({description:e.target.value})}},{key:"updateChannelId",value:function(e){this.setState({channelId:e.target.value})}},{key:"render",value:function(){var e=this.header(),t=this.footer();return v.default.createElement("div",{className:"backstage-content"},v.default.createElement(y.default,null,v.default.createElement(D.Link,{to:"/"+this.props.team.name+"/integrations/incoming_webhooks"},v.default.createElement(k.FormattedMessage,{id:"installed_incoming_webhooks.header",defaultMessage:"Incoming Webhooks"})),v.default.createElement(k.FormattedMessage,{id:e.id,defaultMessage:e.defaultMessage})),v.default.createElement("div",{className:"backstage-form"},v.default.createElement("form",{className:"form-horizontal",onSubmit:this.handleSubmit},v.default.createElement("div",{className:"form-group"},v.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"displayName"},v.default.createElement(k.FormattedMessage,{id:"add_incoming_webhook.displayName",defaultMessage:"Display Name"})),v.default.createElement("div",{className:"col-md-5 col-sm-8"},v.default.createElement("input",{id:"displayName",type:"text",maxLength:"64",className:"form-control",value:this.state.displayName,onChange:this.updateDisplayName}),v.default.createElement("div",{className:"form__help"},v.default.createElement(k.FormattedMessage,{id:"add_incoming_webhook.displayName.help",defaultMessage:"Display name for your incoming webhook made of up to 64 characters."})))),v.default.createElement("div",{className:"form-group"},v.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"description"},v.default.createElement(k.FormattedMessage,{id:"add_incoming_webhook.description",defaultMessage:"Description"})),v.default.createElement("div",{className:"col-md-5 col-sm-8"},v.default.createElement("input",{id:"description",type:"text",maxLength:"128",className:"form-control",value:this.state.description,onChange:this.updateDescription}),v.default.createElement("div",{className:"form__help"},v.default.createElement(k.FormattedMessage,{id:"add_incoming_webhook.description.help",defaultMessage:"Description for your incoming webhook."})))),v.default.createElement("div",{className:"form-group"},v.default.createElement("label",{className:"control-label col-sm-4",htmlFor:"channelId"},v.default.createElement(k.FormattedMessage,{id:"add_incoming_webhook.channel",defaultMessage:"Channel"})),v.default.createElement("div",{className:"col-md-5 col-sm-8"},v.default.createElement(E.default,{id:"channelId",value:this.state.channelId,onChange:this.updateChannelId,selectOpen:!0,selectPrivate:!0}),v.default.createElement("div",{className:"form__help"},v.default.createElement(k.FormattedMessage,{id:"add_incoming_webhook.channel.help",defaultMessage:"Public or private channel that receives the webhook payloads. You must belong to the private channel when setting up the webhook."})))),v.default.createElement("div",{className:"backstage-form__footer"},v.default.createElement(M.default,{type:"backstage",errors:[this.state.serverError,this.state.clientError]}),v.default.createElement(D.Link,{className:"btn btn-sm",to:"/"+this.props.team.name+"/integrations/incoming_webhooks"},v.default.createElement(k.FormattedMessage,{id:"add_incoming_webhook.cancel",defaultMessage:"Cancel"})),v.default.createElement(w.default,{className:"btn btn-primary",type:"submit",spinning:this.state.saving,onClick:this.handleSubmit},v.default.createElement(k.FormattedMessage,{id:t.id,defaultMessage:t.defaultMessage}))))))}}]),t}(v.default.Component);t.default=O}});
//# sourceMappingURL=35.f0f9c153d1a188f6879b.js.map