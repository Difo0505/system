webpackJsonp([43],{1398:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(51),i=o(a),s=n(32),u=o(s),h=n(50),d=o(h),r=n(33),l=o(r),g=n(49),m=o(g),c=n(1740),f=o(c),k=n(22),v=o(k),p=n(1753),O=n(151),C=o(O),b=n(14),I=o(b),_=function(e){function t(e){(0,u.default)(this,t);var n=(0,d.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));n.handleIntegrationChange=n.handleIntegrationChange.bind(n),n.handleUserChange=n.handleUserChange.bind(n);var o=n.props.team?n.props.team.id:"";return n.state={commands:f.default.getCommands(o)||[],loading:!f.default.hasReceivedCommands(o),users:v.default.getProfiles()},n}return(0,m.default)(t,e),(0,l.default)(t,null,[{key:"propTypes",get:function(){return{team:C.default.object,user:C.default.object,children:C.default.node.isRequired,isAdmin:C.default.bool}}}]),(0,l.default)(t,[{key:"componentDidMount",value:function(){f.default.addChangeListener(this.handleIntegrationChange),v.default.addChangeListener(this.handleUserChange),"true"===window.mm_config.EnableCommands&&(0,p.loadTeamCommands)()}},{key:"componentWillUnmount",value:function(){f.default.removeChangeListener(this.handleIntegrationChange),v.default.removeChangeListener(this.handleUserChange)}},{key:"handleIntegrationChange",value:function(){var e=this.props.team.id;this.setState({commands:f.default.getCommands(e),loading:!f.default.hasReceivedCommands(e)})}},{key:"handleUserChange",value:function(){this.setState({users:v.default.getProfiles()})}},{key:"render",value:function(){return I.default.createElement("div",null,I.default.cloneElement(this.props.children,{commands:this.state.commands,users:this.state.users,loading:this.state.loading,team:this.props.team,user:this.props.user,isAdmin:this.props.isAdmin}))}}]),t}(I.default.Component);t.default=_},1740:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(278),i=o(a),s=n(51),u=o(s),h=n(32),d=o(h),r=n(33),l=o(r),g=n(50),m=o(g),c=n(49),f=o(c),k=n(26),v=o(k),p=n(10),O=o(p),C=n(67),b=o(C),I=O.default.ActionTypes,_=function(e){function t(){(0,d.default)(this,t);var e=(0,m.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.dispatchToken=v.default.register(e.handleEventPayload.bind(e)),e.incomingWebhooks=new i.default,e.outgoingWebhooks=new i.default,e.commands=new i.default,e.oauthApps=new i.default,e}return(0,f.default)(t,e),(0,l.default)(t,[{key:"addChangeListener",value:function(e){this.on("changed",e)}},{key:"removeChangeListener",value:function(e){this.removeListener("changed",e)}},{key:"emitChange",value:function(){this.emit("changed")}},{key:"hasReceivedIncomingWebhooks",value:function(e){return this.incomingWebhooks.has(e)}},{key:"getIncomingWebhooks",value:function(e){return this.incomingWebhooks.get(e)||[]}},{key:"setIncomingWebhooks",value:function(e,t){this.incomingWebhooks.set(e,t)}},{key:"addIncomingWebhook",value:function(e){var t=e.team_id,n=this.getIncomingWebhooks(t);n.push(e),this.setIncomingWebhooks(t,n)}},{key:"updateIncomingWebhook",value:function(e){for(var t=e.team_id,n=this.getIncomingWebhooks(t),o=0;o<n.length;o++)if(n[o].id===e.id){n[o]=e;break}this.setIncomingWebhooks(t,n)}},{key:"removeIncomingWebhook",value:function(e,t){var n=this.getIncomingWebhooks(e);n=n.filter(function(e){return e.id!==t}),this.setIncomingWebhooks(e,n)}},{key:"hasReceivedOutgoingWebhooks",value:function(e){return this.outgoingWebhooks.has(e)}},{key:"getOutgoingWebhooks",value:function(e){return this.outgoingWebhooks.get(e)||[]}},{key:"getOutgoingWebhook",value:function(e,t){return this.getOutgoingWebhooks(e).filter(function(e){return e.id===t})[0]}},{key:"setOutgoingWebhooks",value:function(e,t){this.outgoingWebhooks.set(e,t)}},{key:"addOutgoingWebhook",value:function(e){var t=e.team_id,n=this.getOutgoingWebhooks(t);n.push(e),this.setOutgoingWebhooks(t,n)}},{key:"updateOutgoingWebhook",value:function(e){for(var t=e.team_id,n=this.getOutgoingWebhooks(t),o=0;o<n.length;o++)if(n[o].id===e.id){n[o]=e;break}this.setOutgoingWebhooks(t,n)}},{key:"removeOutgoingWebhook",value:function(e,t){var n=this.getOutgoingWebhooks(e);n=n.filter(function(e){return e.id!==t}),this.setOutgoingWebhooks(e,n)}},{key:"hasReceivedCommands",value:function(e){return this.commands.has(e)}},{key:"getCommands",value:function(e){return this.commands.get(e)||[]}},{key:"getCommand",value:function(e,t){return this.getCommands(e).filter(function(e){return e.id===t})[0]}},{key:"setCommands",value:function(e,t){this.commands.set(e,t)}},{key:"addCommand",value:function(e){var t=e.team_id,n=this.getCommands(t);n.push(e),this.setCommands(t,n)}},{key:"updateCommand",value:function(e){for(var t=e.team_id,n=this.getCommands(t),o=0;o<n.length;o++)if(n[o].id===e.id){n[o]=e;break}this.setCommands(t,n)}},{key:"removeCommand",value:function(e,t){var n=this.getCommands(e);n=n.filter(function(e){return e.id!==t}),this.setCommands(e,n)}},{key:"hasReceivedOAuthApps",value:function(e){return this.oauthApps.has(e)}},{key:"getOAuthApps",value:function(e){return this.oauthApps.get(e)||[]}},{key:"setOAuthApps",value:function(e,t){this.oauthApps.set(e,t)}},{key:"addOAuthApp",value:function(e){var t=e.creator_id,n=this.getOAuthApps(t);n.push(e),this.setOAuthApps(t,n)}},{key:"removeOAuthApp",value:function(e,t){var n=this.getOAuthApps(e);n=n.filter(function(e){return e.id!==t}),this.setOAuthApps(e,n)}},{key:"handleEventPayload",value:function(e){var t=e.action;switch(t.type){case I.RECEIVED_INCOMING_WEBHOOKS:this.setIncomingWebhooks(t.teamId,t.incomingWebhooks),this.emitChange();break;case I.RECEIVED_INCOMING_WEBHOOK:this.addIncomingWebhook(t.incomingWebhook),this.emitChange();break;case I.UPDATED_INCOMING_WEBHOOK:this.updateIncomingWebhook(t.incomingWebhook),this.emitChange();break;case I.REMOVED_INCOMING_WEBHOOK:this.removeIncomingWebhook(t.teamId,t.id),this.emitChange();break;case I.RECEIVED_OUTGOING_WEBHOOKS:this.setOutgoingWebhooks(t.teamId,t.outgoingWebhooks),this.emitChange();break;case I.RECEIVED_OUTGOING_WEBHOOK:this.addOutgoingWebhook(t.outgoingWebhook),this.emitChange();break;case I.UPDATED_OUTGOING_WEBHOOK:this.updateOutgoingWebhook(t.outgoingWebhook),this.emitChange();break;case I.REMOVED_OUTGOING_WEBHOOK:this.removeOutgoingWebhook(t.teamId,t.id),this.emitChange();break;case I.RECEIVED_COMMANDS:this.setCommands(t.teamId,t.commands),this.emitChange();break;case I.RECEIVED_COMMAND:this.addCommand(t.command),this.emitChange();break;case I.UPDATED_COMMAND:this.updateCommand(t.command),this.emitChange();break;case I.REMOVED_COMMAND:this.removeCommand(t.teamId,t.id),this.emitChange();break;case I.RECEIVED_OAUTHAPPS:this.setOAuthApps(t.userId,t.oauthApps),this.emitChange();break;case I.RECEIVED_OAUTHAPP:this.addOAuthApp(t.oauthApp),this.emitChange();break;case I.REMOVED_OAUTHAPP:this.removeOAuthApp(t.userId,t.id),this.emitChange()}}}]),t}(b.default);t.default=new _},1753:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(){b.default.listIncomingHooks(function(e){m.default.handleServerAction({type:I.ActionTypes.RECEIVED_INCOMING_WEBHOOKS,teamId:f.default.getCurrentId(),incomingWebhooks:e}),i(e)},function(e){O.dispatchError(e,"listIncomingHooks")})}function i(e){for(var t={},n=0;n<e.length;n++){var o=e[n];v.default.hasProfile(o.user_id)||(t[o.user_id]=!0)}var a=(0,l.default)(t);0!==a.length&&(0,W.getProfilesByIds)(a)(y,A)}function s(){b.default.listOutgoingHooks(function(e){m.default.handleServerAction({type:I.ActionTypes.RECEIVED_OUTGOING_WEBHOOKS,teamId:f.default.getCurrentId(),outgoingWebhooks:e}),u(e)},function(e){O.dispatchError(e,"listOutgoingHooks")})}function u(e){for(var t={},n=0;n<e.length;n++){var o=e[n];v.default.hasProfile(o.creator_id)||(t[o.creator_id]=!0)}var a=(0,l.default)(t);0!==a.length&&(0,W.getProfilesByIds)(a)(y,A)}function h(){b.default.listTeamCommands(function(e){m.default.handleServerAction({type:I.ActionTypes.RECEIVED_COMMANDS,teamId:b.default.teamId,commands:e}),d(e)},function(e){O.dispatchError(e,"loadTeamCommands")})}function d(e){for(var t={},n=0;n<e.length;n++){var o=e[n];v.default.hasProfile(o.creator_id)||(t[o.creator_id]=!0)}var a=(0,l.default)(t);0!==a.length&&(0,W.getProfilesByIds)(a)(y,A)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(78),l=o(r);t.loadIncomingHooks=a,t.loadOutgoingHooks=s,t.loadTeamCommands=h;var g=n(26),m=o(g),c=n(43),f=o(c),k=n(22),v=o(k),p=n(113),O=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(p),C=n(52),b=o(C),I=n(10),_=n(36),E=o(_),W=n(115),y=E.default.dispatch,A=E.default.getState}});
//# sourceMappingURL=43.daa6674875b95da8542c.js.map